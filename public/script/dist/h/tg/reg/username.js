define("h/tg/reg/username",["../../public/list.regexp","../../public/tipFun","../../plugins/dialog"],function(t,e,a){function s(t){r.open({title:"错误提醒",content:t,btn:["确定"]})}var n=t("../../public/list.regexp"),i=t("../../public/tipFun"),r=t("../../plugins/dialog"),c=$("#submitBtn"),o=$("#username"),l=$("#userCaptcha"),u=$("#password"),d=($("#captchaWrap"),$("#userCaptchaWrap")),p=$("#redirectUri").val(),f=$("#myUrl").val(),v=$("#formName").attr("data-captcha")||!1,m=!1,g={username:function(){var t=$.trim(o.val()),e={obj:o,status:!0,msg:""};return t?t.length<4||t.length>20?(e.status=!1,e.msg="用户名长度只能在4-20个字符之间"):n.username.test(t)||(e.status=!1,e.msg="用户名以英文字母开头，支持字母、数字、下划线(_)或横杠(-)的组合"):(e.status=!1,e.msg="请输入用户名"),e},password:function(){var t=u.val(),e={obj:u,status:!0,msg:""};return t?t.length<6?(e.status=!1,e.msg="密码至少6位以上"):n.hasSpace.test(t)?(e.status=!1,e.msg="密码不能有空格"):n.allNumber.test(t)?(e.status=!1,e.msg="密码不能为纯数字"):n.allLetterSame.test(t)?(e.status=!1,e.msg="密码不能为相同的字母组成"):n.password.test(t)||(e.status=!1,e.msg="密码只能由英文、数字及符号组成"):(e.status=!1,e.msg="请输入密码"),e},userCaptcha:function(){var t=$.trim(l.val()),e={obj:l,status:!0,msg:""};return(""==t||4!=t.length)&&(e.status=!1,e.msg="请输入正确的验证码"),e}},h=function(t){var e=g[t]();return e.status||s(e.msg),e};c.click(function(){var t=!0,e={},a=["username","password"];if(v&&a.push("userCaptcha"),m)return!1;for(var n in a)if(!h(a[n]).status)return t=!1;return t&&(e.username=$.trim(o.val()),e.password=u.val(),e.redirectUri=p,v&&(e.captcha=$.trim(l.val())),$.ajax({url:PageConfig.myUrl+"reg/uflow/",dataType:"jsonp",beforeSend:function(){m=!0},data:e}).done(function(t){m=!1,t.status?i.fire("success",t.msg||"注册成功",function(){t.data&&t.data.url&&(window.location.href=t.data.url)}):(t.data.hasOwnProperty("using_captcha")&&1===t.data.using_captcha&&(0==v?d.parent().removeClass("hide").find("img").attr("src",f+"/i/captcha?"+(new Date).getTime()):(d.trigger("click"),l.val("")),v=!0),t.msg&&s(t.msg))}).fail(function(){m=!1})),!1}),function(){var t=!1;$("#showPwd").on("click",function(){var e=$(this).find(".ic-eye");return t?(e.removeClass("ic-eye-on"),u.attr("type","password")):(e.addClass("ic-eye-on"),u.attr("type","text")),t=!t,!1})}(),function(){var t=$("#userCaptchaWrap"),e=t.find("img");t.click(function(){var t=e.attr("src");return t.indexOf("?")>-1&&(t=t.split("?")[0]),e.attr("src",t+"?"+(new Date).getTime()),!1})}(),document.body.addEventListener("touchmove",function(t){t.preventDefault()},!1)}),define("h/public/list.regexp",[],{email:/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/,code:/^\d{4}$/,zipcode:/^[0-9]{6}$/,mobilephone:/^1[3-9][0-9]{9}$/,areacode:/^\d{3,6}$/,tel:/^\d{7,8}$/,ext:/\d{3,}$/,captcha:/^\w{4}$/,username:/^[a-zA-Z][a-zA-Z0-9_\-]*$/,password:/^[a-zA-Z0-9_!@#\$%\^&\*\(\)\\\|\/\?\.\<\>'"\{\}\[\]=\-\+\~\,\;\:\s]+$/,chinese:/^[\u4e00-\u9fa5]+$/,link:/^(http|ftp|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&amp;\+#]*[\w\-\@?^=%&amp;\+#])?/,qq:/^[1-9][0-9]{4,}$/,regPrice:/^[0-9]+([.]{1}[0-9]{1,2})?$/,positiveNum:/^[1-9]\d*$/,allNumber:/^\d+$/,allLetter:/^[a-zA-Z]+$/,symbols:/[_!@#\$%\^&\*\(\)\\\|\/\?\.\<\>'"\{\}\[\]=\-\+\~\,\;\:\s]+/,allSame:/^([\s\S])\1*$/,allLetterSame:/^([a-zA-Z])\1*$/,lowerLetter:/[a-z]+/,upperLetter:/[A-Z]+/,hasSpace:/\s/}),define("h/public/tipFun",[],function(t,e,a){e.fire=function(t,e,a,s){$.isFunction(a)?(s=a,a=2e3):(a=a||2e3,s=s||function(){});var n=$("#tipBox");n[0]&&n.remove();var i='<div id="tipBox" class="mod-tip-box"><div class="tip-box-inner"><div class="tip-box-content"><span class="icon '+t+'"></span><span class="txt">'+e+"</span></div></div></div>";$("body").append(i),$("#tipBox").stop().show().delay(a).fadeOut(500,function(){$(this).remove(),"function"==typeof s&&s()})}}),define("h/plugins/dialog",[],function(t,e,a){function s(t){var e=this;e.config=$.extend({},n,t),e.view()}var n={shade:!0,shadeClose:!1,title:"提示信息",content:"",btn:["确定","取消"]},i={open:function(t){new s(t)},close:function(){var t=$("#"+r[0]);t[0]&&t.remove()}},r=["mod-dialog"];s.prototype.view=function(){i.close();var t=this,e=t.config,a=e.shade?$('<div id="'+r[0]+'" class="'+r[0]+' dialogshade" '+("string"==typeof e.shade?'style="'+e.shade+'"':"")+"></div>"):$('<div id="'+r[0]+'" class="'+r[0]+'"></div>'),s=function(){var t="object"==typeof e.title;return e.title?'<div class="title" style="'+(t?e.title[1]:"")+'">'+(t?e.title[0]:e.title)+"</div>":""}(),n=function(){"string"==typeof e.btn&&(e.btn=[e.btn]);var t=e.btn.length,a="";return 0!==t&&e.btn?(a='<a class="yes" type="1" href="javascript:;">'+e.btn[0]+"</a>",2===t&&(a='<a class="cancel" type="0" href="javascript:;">'+e.btn[1]+"</a>"+a),'<div class="btns">'+a+"</div>"):""}(),c='<div class="dialog-inner"><div class="dialog-main">'+s+'<div class="disc">'+e.content+"</div>"+n+"</div></div>";a.html(c),$("body").append(a);var o=$("#"+r[0]);e.success&&e.success(),t.action(e,o)},s.prototype.action=function(t,e){function a(){t.cancel&&t.cancel(),i.close()}t.shade&&t.shadeClose&&e.on("click",function(t){"mod-dialog"==t.target.id&&i.close()}),e.on("touchmove",function(t){t.preventDefault()}),e.find(".btns").children("a").on("click",function(){var e=$(this).attr("type");1==e?t.yes?t.yes():i.close():0==e&&a()})},a.exports=i});