define("h/help/feedback",["../public/list.regexp","../public/tipFun","../plugins/dialog"],function(t,e,n){function i(t){o.open({title:"错误提醒",content:t,btn:["确定"]})}var a=t("../public/list.regexp"),s=t("../public/tipFun"),o=t("../plugins/dialog"),l=$("#textarea"),c=$("#count"),d=$("#contact"),r=$("#submitBtn");l.on("input propertychange",function(){var t=160,e=l.val(),n=e.length,i=t-n;i=n>t?0:i,n>t&&l.val(e.substring(0,t)),c.text(i),r.hasClass("button-disabled")&&r.removeClass("button-disabled"),$(this).val()||r.addClass("button-disabled")});var u={inpt:function(){var t=$.trim(l.val()),e={obj:l,status:!0,msg:""};return t||(e.status=!1,e.msg="回复内容不能为空",r.addClass("button-disabled")),e},contact:function(){var t=$.trim(d.val()),e={obj:d,status:!0,msg:""};return t?(d.siblings(".clear-input").show(),a.email.test(t)||a.mobilephone.test(t)||(e.status=!1,e.msg="电子邮箱/手机号格式不对")):d.siblings(".clear-input").hide(),e}},p=function(t){var e=u[t]();return e.status||i(e.msg),e};r.on("click",function(){if(r.hasClass("button-disabled"))return!1;var t=$.trim(l.val()),e=$.trim(d.val()),n=!0,a=["inpt","contact"];for(var o in a)p(a[o]).status||(n=!1);n&&$.ajax({url:"/help/feedback/",type:"POST",dataType:"json",beforeSend:function(){r.addClass("button-disabled")},data:{content:t,email:e}}).done(function(t){t.status?s.fire("success",t.errmsg||"提交成功",function(){window.location.href="/help/"}):t.errmsg&&i(t.errmsg)}).always(function(){r.removeClass("button-disabled")})})}),define("h/public/list.regexp",[],{email:/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/,code:/^\d{4}$/,zipcode:/^[0-9]{6}$/,mobilephone:/^1[3-9][0-9]{9}$/,areacode:/^\d{3,6}$/,tel:/^\d{7,8}$/,ext:/\d{3,}$/,captcha:/^\w{4}$/,username:/^[a-zA-Z][a-zA-Z0-9_\-]*$/,password:/^[a-zA-Z0-9_!@#\$%\^&\*\(\)\\\|\/\?\.\<\>'"\{\}\[\]=\-\+\~\,\;\:\s]+$/,chinese:/^[\u4e00-\u9fa5]+$/,link:/^(http|ftp|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&amp;\+#]*[\w\-\@?^=%&amp;\+#])?/,qq:/^[1-9][0-9]{4,}$/,regPrice:/^[0-9]+([.]{1}[0-9]{1,2})?$/,positiveNum:/^[1-9]\d*$/,allNumber:/^\d+$/,allLetter:/^[a-zA-Z]+$/,symbols:/[_!@#\$%\^&\*\(\)\\\|\/\?\.\<\>'"\{\}\[\]=\-\+\~\,\;\:\s]+/,allSame:/^([\s\S])\1*$/,allLetterSame:/^([a-zA-Z])\1*$/,lowerLetter:/[a-z]+/,upperLetter:/[A-Z]+/,hasSpace:/\s/}),define("h/public/tipFun",[],function(t,e,n){e.fire=function(t,e,n,i){$.isFunction(n)?(i=n,n=2e3):(n=n||2e3,i=i||function(){});var a=$("#tipBox");a[0]&&a.remove();var s='<div id="tipBox" class="mod-tip-box"><div class="tip-box-inner"><div class="tip-box-content"><span class="icon '+t+'"></span><span class="txt">'+e+"</span></div></div></div>";$("body").append(s),$("#tipBox").stop().show().delay(n).fadeOut(500,function(){$(this).remove(),"function"==typeof i&&i()})}}),define("h/plugins/dialog",[],function(t,e,n){function i(t){var e=this;e.config=$.extend({},a,t),e.view()}var a={shade:!0,shadeClose:!1,title:"提示信息",content:"",btn:["确定","取消"]},s={open:function(t){new i(t)},close:function(){var t=$("#"+o[0]);t[0]&&t.remove()}},o=["mod-dialog"];i.prototype.view=function(){s.close();var t=this,e=t.config,n=e.shade?$('<div id="'+o[0]+'" class="'+o[0]+' dialogshade" '+("string"==typeof e.shade?'style="'+e.shade+'"':"")+"></div>"):$('<div id="'+o[0]+'" class="'+o[0]+'"></div>'),i=function(){var t="object"==typeof e.title;return e.title?'<div class="title" style="'+(t?e.title[1]:"")+'">'+(t?e.title[0]:e.title)+"</div>":""}(),a=function(){"string"==typeof e.btn&&(e.btn=[e.btn]);var t=e.btn.length,n="";return 0!==t&&e.btn?(n='<a class="yes" type="1" href="javascript:;">'+e.btn[0]+"</a>",2===t&&(n='<a class="cancel" type="0" href="javascript:;">'+e.btn[1]+"</a>"+n),'<div class="btns">'+n+"</div>"):""}(),l='<div class="dialog-inner"><div class="dialog-main">'+i+'<div class="disc">'+e.content+"</div>"+a+"</div></div>";n.html(l),$("body").append(n);var c=$("#"+o[0]);e.success&&e.success(),t.action(e,c)},i.prototype.action=function(t,e){function n(){t.cancel&&t.cancel(),s.close()}t.shade&&t.shadeClose&&e.on("click",function(t){"mod-dialog"==t.target.id&&s.close()}),e.on("touchmove",function(t){t.preventDefault()}),e.find(".btns").children("a").on("click",function(){var e=$(this).attr("type");1==e?t.yes?t.yes():s.close():0==e&&n()})},n.exports=s});