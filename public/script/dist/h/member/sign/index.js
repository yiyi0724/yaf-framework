define("h/member/sign/index",["../../public/itemlink"],function(t,a,e){t("../../public/itemlink"),self!=top&&$(".mod-nav").add(".mod-user-footer").hide(),function(){var t=$("#signBtn"),a=$("#sign"),e=$("#mask"),i=$("#close"),n=($("#table"),$("#signDate").data("date")),s=!1;t.on("click",function(){var t=parseInt($(".sign").data("issign")),i=parseInt($("#tcoin").text());return t?(e.show(),void a.show()):s?!1:($.ajax({url:"/member/sign/usersign/",type:"GET",dataType:"json",beforeSend:function(){s=!0}}).done(function(t){s=!1,t.status?(e.show(),a.show(),i+=t.data.coin,$(".sign").data("issign",1),$("#iday").html(t.data.days),$("#icoin").html(t.data.coin),$("#tcoin").html(i),$(".sign").html("已签到"),$("#day").html(t.data.days)):t.data&&t.data.url&&(window.location.href=t.data.url)}).fail(function(){s=!1}),!1)}),e.click(function(t){a.hide(),e.hide()}),i.click(function(t){a.hide(),e.hide()});var d=function(){for(var t=(n+"").split(","),a=[],e=0;e<t.length;e++)a.push(Number(t[e]));var i=new Date,s=i.getFullYear(),d=i.getMonth()+1,o=i.getDate(),r=new Date(s,d,0).getDate(),c=(new Date(s,d,1).getDay(),i.getDay());i.setDate(1);var l=i.getDay();i.setMonth(d),i.setDate(0);for(var h=i.getDay(),u=[],f={},g=new Date(s,d-1,0).getDate(),m=0,e=l;e>0;e--)f={year:s,month:d-1,day:g+1-e,week:(c+e)%7,status:"disabled"},u.push(f);for(var e=0;r>e;e++){var v=a.indexOf(e+1);f="-1"==v?{year:s,month:d,day:e+1,week:(c+e)%7}:{year:s,month:d,day:e+1,week:(c+e)%7,active:"active"},u.push(f)}for(var e=1;7>h+e;e++)f={year:s,month:d+1,day:m+e,week:(c+e)%7,status:"disabled"},u.push(f);for(var $="<tr>",e=0,y=u.length;y>e;e++){var o=u[e],w=o.day==(new Date).getDate()?"active":"",k="disabled"==o.status?"disabled":"",p="active"==o.active?"active":"";$+='<td class="'+w+" "+p+" "+k+'"><span>'+o.day+"</span></td>",e%7==6&&y-1>e&&($+="</tr><tr>")}$+="</tr>",table.innerHTML=$};d()}(),function(){var t=$("#straBtn"),a=$("#strategy"),e=$("#mask"),i=$("#sclose");t.on("click",function(){e.show(),a.removeClass("hide")}),e.click(function(t){a.addClass("hide"),e.hide()}),i.click(function(t){a.addClass("hide"),e.hide()})}()}),define("h/public/itemlink",[],function(t,a,e){$("#gameList").on("click",".j-link",function(){var t=$(this).attr("data-gameid"),a="/game/"+t+".html";self==top?window.location.href=a:window.top.location.href=a})});