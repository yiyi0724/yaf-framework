define("h/member/info/mchange",["../../public/list.regexp","../../public/tipFun","../../plugins/dialog","../../public/time.count"],function(t,e,n){function i(t){o.open({title:"错误提醒",content:t,btn:["确定"]})}var a=t("../../public/list.regexp"),s=t("../../public/tipFun"),o=t("../../plugins/dialog"),l=t("../../public/time.count").countdown,c=$("#mobile"),d=$("#code"),r=$("#sendcode"),u=$("#submitBtn"),p=PageConfig.myUrl+"mobilephone/rmbind/",m="rmbind",f=!0,b={mobile:function(){var t=$.trim(c.val()),e={obj:c,status:!0,msg:""};return a.mobilephone.test(t)||(e.status=!1,e.msg="请输入正确的手机号码"),e},code:function(){var t=$.trim(d.val()),e={obj:d,status:!0,msg:""};return a.code.test(t)||(e.status=!1,e.msg="请输入正确的短信验证码"),e}},v=function(t){var e=b[t]();return e.status||i(e.msg),e};r.click(function(){return r.data("progress")?!1:(v("mobile").status&&$.ajax({url:PageConfig.myUrl+"sender/sms/",dataType:"jsonp",data:{phonenumber:$.trim($("#mobile").val()),channel:m}}).done(function(t){t.status?l(r,60,function(t){t>0?r.html("重新发送短信<br/>剩余"+t+"秒"):r.html("重新发送")}):t.msg&&i(t.msg)}),!1)}),u.click(function(){var t=!0,e={},n=["mobile","code"];for(var a in n)if(!v(n[a]).status)return t=!1;return t&&(e.phonenumber=$.trim(c.val()),e.code=$.trim(d.val()),$.ajax({url:p,dataType:"jsonp",beforeSend:function(){u.attr("disabled",!0)},data:e}).done(function(t){t.status?f?(p=PageConfig.myUrl+"mobilephone/bind/",m="bind",clearInterval(r.data("time")),r.html("发送短信验证码").removeClass("button-disabled").data("progress",!1),c.val("").attr("placeholder","请输入新手机号码"),d.val(""),u.val("确定"),f=!1,u.attr("disabled",!1)):s.fire("success",t.msg||"修改成功",function(){t.data&&t.data.url&&(window.location.href=t.data.url)}):(t.msg&&i(t.msg),u.attr("disabled",!1))}).fail(function(){u.attr("disabled",!1)})),!1})}),define("h/public/list.regexp",[],{email:/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/,code:/^\d{4}$/,zipcode:/^[0-9]{6}$/,mobilephone:/^1[3-9][0-9]{9}$/,areacode:/^\d{3,6}$/,tel:/^\d{7,8}$/,ext:/\d{3,}$/,captcha:/^\w{4}$/,username:/^[a-zA-Z][a-zA-Z0-9_\-]*$/,password:/^[a-zA-Z0-9_!@#\$%\^&\*\(\)\\\|\/\?\.\<\>'"\{\}\[\]=\-\+\~\,\;\:\s]+$/,chinese:/^[\u4e00-\u9fa5]+$/,link:/^(http|ftp|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&amp;\+#]*[\w\-\@?^=%&amp;\+#])?/,qq:/^[1-9][0-9]{4,}$/,regPrice:/^[0-9]+([.]{1}[0-9]{1,2})?$/,positiveNum:/^[1-9]\d*$/,allNumber:/^\d+$/,allLetter:/^[a-zA-Z]+$/,symbols:/[_!@#\$%\^&\*\(\)\\\|\/\?\.\<\>'"\{\}\[\]=\-\+\~\,\;\:\s]+/,allSame:/^([\s\S])\1*$/,allLetterSame:/^([a-zA-Z])\1*$/,lowerLetter:/[a-z]+/,upperLetter:/[A-Z]+/,hasSpace:/\s/}),define("h/public/tipFun",[],function(t,e,n){e.fire=function(t,e,n,i){$.isFunction(n)?(i=n,n=2e3):(n=n||2e3,i=i||function(){});var a=$("#tipBox");a[0]&&a.remove();var s='<div id="tipBox" class="mod-tip-box"><div class="tip-box-inner"><div class="tip-box-content"><span class="icon '+t+'"></span><span class="txt">'+e+"</span></div></div></div>";$("body").append(s),$("#tipBox").stop().show().delay(n).fadeOut(500,function(){$(this).remove(),"function"==typeof i&&i()})}}),define("h/plugins/dialog",[],function(t,e,n){function i(t){var e=this;e.config=$.extend({},a,t),e.view()}var a={shade:!0,shadeClose:!1,title:"提示信息",content:"",btn:["确定","取消"]},s={open:function(t){new i(t)},close:function(){var t=$("#"+o[0]);t[0]&&t.remove()}},o=["mod-dialog"];i.prototype.view=function(){s.close();var t=this,e=t.config,n=e.shade?$('<div id="'+o[0]+'" class="'+o[0]+' dialogshade" '+("string"==typeof e.shade?'style="'+e.shade+'"':"")+"></div>"):$('<div id="'+o[0]+'" class="'+o[0]+'"></div>'),i=function(){var t="object"==typeof e.title;return e.title?'<div class="title" style="'+(t?e.title[1]:"")+'">'+(t?e.title[0]:e.title)+"</div>":""}(),a=function(){"string"==typeof e.btn&&(e.btn=[e.btn]);var t=e.btn.length,n="";return 0!==t&&e.btn?(n='<a class="yes" type="1" href="javascript:;">'+e.btn[0]+"</a>",2===t&&(n='<a class="cancel" type="0" href="javascript:;">'+e.btn[1]+"</a>"+n),'<div class="btns">'+n+"</div>"):""}(),l='<div class="dialog-inner"><div class="dialog-main">'+i+'<div class="disc">'+e.content+"</div>"+a+"</div></div>";n.html(l),$("body").append(n);var c=$("#"+o[0]);e.success&&e.success(),t.action(e,c)},i.prototype.action=function(t,e){function n(){t.cancel&&t.cancel(),s.close()}t.shade&&t.shadeClose&&e.on("click",function(t){"mod-dialog"==t.target.id&&s.close()}),e.on("touchmove",function(t){t.preventDefault()}),e.find(".btns").children("a").on("click",function(){var e=$(this).attr("type");1==e?t.yes?t.yes():s.close():0==e&&n()})},n.exports=s}),define("h/public/time.count",[],function(t,e,n){e.countdown=function(t,e,n){"number"!=typeof e&&(n=e,e=60),t.data("progress",!0).addClass("button-disabled"),n(--e);var i=setInterval(function(){--e<=0&&(t.data("progress",!1).removeClass("button-disabled"),clearInterval(i),i=null),n(e)},1e3);t.data("time",i)}});