define("h/member/info/avatar",["../../plugins/dialog"],function(t,n,i){function e(t,n,i){n=n||1,i=i||21;for(var e,a,o=[],s=[];i>n;n++)s.push(n);for(e=0;t>e;e++)a=parseInt(Math.random()*s.length),o.push(s[a]),s.splice(a,1);return o}function a(t){o.open({title:"错误提醒",content:t,btn:["确定"]})}var o=t("../../plugins/dialog"),s=$("#btnRandom"),c=$("#randomSort"),d=$("#submitBtn");s.click(function(){var t=[];$.each(e(16,1,98),function(n,i){t.push('<li data-id="'+i+'"><div class="inner"><img src="/portrait/avatar/200/'+i+'.jpg" /></div></li>')}),c.html(t.join(""))}),c.on("click","li",function(){var t=$(this);return c.find("li").removeClass("active").find(".select-icon").remove(),t.addClass("active").find(".inner").append('<span class="select-icon"></span>'),!1}),d.on("click",function(){var t=c.find(".active").data("id");return t?($.ajax({url:"/member/info/editavatar/",type:"GET",dataType:"json",beforeSend:function(){d.attr("disabled",!0)},data:{id:t}}).done(function(t){t.status?window.location.reload():(d.attr("disabled",!1),t.errmsg&&a(t.errmsg))}).fail(function(){d.attr("disabled",!1)}),!1):(a("您还没选择头像"),!1)})}),define("h/plugins/dialog",[],function(t,n,i){function e(t){var n=this;n.config=$.extend({},a,t),n.view()}var a={shade:!0,shadeClose:!1,title:"提示信息",content:"",btn:["确定","取消"]},o={open:function(t){new e(t)},close:function(){var t=$("#"+s[0]);t[0]&&t.remove()}},s=["mod-dialog"];e.prototype.view=function(){o.close();var t=this,n=t.config,i=n.shade?$('<div id="'+s[0]+'" class="'+s[0]+' dialogshade" '+("string"==typeof n.shade?'style="'+n.shade+'"':"")+"></div>"):$('<div id="'+s[0]+'" class="'+s[0]+'"></div>'),e=function(){var t="object"==typeof n.title;return n.title?'<div class="title" style="'+(t?n.title[1]:"")+'">'+(t?n.title[0]:n.title)+"</div>":""}(),a=function(){"string"==typeof n.btn&&(n.btn=[n.btn]);var t=n.btn.length,i="";return 0!==t&&n.btn?(i='<a class="yes" type="1" href="javascript:;">'+n.btn[0]+"</a>",2===t&&(i='<a class="cancel" type="0" href="javascript:;">'+n.btn[1]+"</a>"+i),'<div class="btns">'+i+"</div>"):""}(),c='<div class="dialog-inner"><div class="dialog-main">'+e+'<div class="disc">'+n.content+"</div>"+a+"</div></div>";i.html(c),$("body").append(i);var d=$("#"+s[0]);n.success&&n.success(),t.action(n,d)},e.prototype.action=function(t,n){function i(){t.cancel&&t.cancel(),o.close()}t.shade&&t.shadeClose&&n.on("click",function(t){"mod-dialog"==t.target.id&&o.close()}),n.on("touchmove",function(t){t.preventDefault()}),n.find(".btns").children("a").on("click",function(){var n=$(this).attr("type");1==n?t.yes?t.yes():o.close():0==n&&i()})},i.exports=o});