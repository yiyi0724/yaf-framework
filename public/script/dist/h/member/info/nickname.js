define("h/member/info/nickname",["../../public/tipFun","../../plugins/dialog"],function(n,t,i){function e(n){a.open({title:"错误提醒",content:n,btn:["确定"]})}var s=n("../../public/tipFun"),a=n("../../plugins/dialog"),o=$("#submitBtn"),c=$("#nickname"),d={nickname:function(){var n=$.trim(c.val()),t={obj:c,status:!0,msg:""};return n||(t.status=!1,t.msg="请输入昵称"),t}},l=function(n){var t=d[n]();return t.status||e(t.msg),t};o.on("click",function(){var n=!0;if(!l("nickname").status)return n=!1;if(n){var t=$.trim(c.val());$.ajax({url:"/member/info/nickname/",type:"POST",dataType:"json",beforeSend:function(){o.attr("disabled",!0)},data:{nickname:t}}).done(function(n){n.status?s.fire("success",n.errmsg,function(){window.location.href="/member/info/"}):(n.errmsg&&e(n.errmsg),o.attr("disabled",!1))}).fail(function(){o.attr("disabled",!1)})}return!1})}),define("h/public/tipFun",[],function(n,t,i){t.fire=function(n,t,i,e){$.isFunction(i)?(e=i,i=2e3):(i=i||2e3,e=e||function(){});var s=$("#tipBox");s[0]&&s.remove();var a='<div id="tipBox" class="mod-tip-box"><div class="tip-box-inner"><div class="tip-box-content"><span class="icon '+n+'"></span><span class="txt">'+t+"</span></div></div></div>";$("body").append(a),$("#tipBox").stop().show().delay(i).fadeOut(500,function(){$(this).remove(),"function"==typeof e&&e()})}}),define("h/plugins/dialog",[],function(n,t,i){function e(n){var t=this;t.config=$.extend({},s,n),t.view()}var s={shade:!0,shadeClose:!1,title:"提示信息",content:"",btn:["确定","取消"]},a={open:function(n){new e(n)},close:function(){var n=$("#"+o[0]);n[0]&&n.remove()}},o=["mod-dialog"];e.prototype.view=function(){a.close();var n=this,t=n.config,i=t.shade?$('<div id="'+o[0]+'" class="'+o[0]+' dialogshade" '+("string"==typeof t.shade?'style="'+t.shade+'"':"")+"></div>"):$('<div id="'+o[0]+'" class="'+o[0]+'"></div>'),e=function(){var n="object"==typeof t.title;return t.title?'<div class="title" style="'+(n?t.title[1]:"")+'">'+(n?t.title[0]:t.title)+"</div>":""}(),s=function(){"string"==typeof t.btn&&(t.btn=[t.btn]);var n=t.btn.length,i="";return 0!==n&&t.btn?(i='<a class="yes" type="1" href="javascript:;">'+t.btn[0]+"</a>",2===n&&(i='<a class="cancel" type="0" href="javascript:;">'+t.btn[1]+"</a>"+i),'<div class="btns">'+i+"</div>"):""}(),c='<div class="dialog-inner"><div class="dialog-main">'+e+'<div class="disc">'+t.content+"</div>"+s+"</div></div>";i.html(c),$("body").append(i);var d=$("#"+o[0]);t.success&&t.success(),n.action(t,d)},e.prototype.action=function(n,t){function i(){n.cancel&&n.cancel(),a.close()}n.shade&&n.shadeClose&&t.on("click",function(n){"mod-dialog"==n.target.id&&a.close()}),t.on("touchmove",function(n){n.preventDefault()}),t.find(".btns").children("a").on("click",function(){var t=$(this).attr("type");1==t?n.yes?n.yes():a.close():0==t&&i()})},i.exports=a});